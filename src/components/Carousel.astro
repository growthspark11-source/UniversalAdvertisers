---
/* Carousel Images using ?url â†’ produces browser-safe URLs */

import carousel1 from "../assets/images/carousel/c1.jpeg";
import carousel2 from "../assets/images/carousel/c2.jpeg";
import carousel3 from "../assets/images/carousel/c3.jpeg";
import carousel4 from "../assets/images/carousel/c4.jpeg";
import carousel5 from "../assets/images/carousel/c5.jpeg";
import carousel6 from "../assets/images/carousel/c6.jpeg";
import carousel7 from "../assets/images/carousel/c7.jpeg";
import carousel8 from "../assets/images/carousel/c8.jpeg";

/* Now each import contains a real path like /_astro/one.xxxxxx.jpeg */

const images = [carousel1.src, carousel3.src, carousel4.src];

const altTexts = [
    "Professional Signage Solutions",
    "Custom Sign Design",
    "Premium Outdoor Signage",
    "Illuminated Business Signs",
    "Indoor Signage Installation",
    "Commercial Signage",
    "LED Sign Solutions",
    "Branded Signage Systems",
];
---

<div
    class="relative w-full h-[300px] md:h-[500px] lg:h-[700px] overflow-hidden group"
    id="carousel"
>
    <!-- Slides -->
    <div class="relative h-full w-full">
        {
            images.map((image, index) => (
                <div
                    class={`absolute inset-0 transition-opacity duration-1000 ease-in-out ${
                        index === 0 ? "opacity-100" : "opacity-0"
                    } slide`}
                    data-index={index}
                >
                    <img
                        src={image}
                        alt={altTexts[index]}
                        class="w-full h-full object-cover lg:object-contain"
                    />
                    <div class="absolute inset-0 bg-black/5" />
                </div>
            ))
        }
    </div>

    <!-- Indicators -->
    <div
        class="absolute bottom-5 left-1/2 transform -translate-x-1/2 flex space-x-3 z-10"
    >
        {
            images.map((_, index) => (
                <button
                    class={`w-3 h-3 rounded-full transition-colors duration-300 ${
                        index === 0
                            ? "bg-white"
                            : "bg-white/50 hover:bg-white/80"
                    } indicator`}
                    data-index={index}
                    aria-label={`Go to slide ${index + 1}`}
                />
            ))
        }
    </div>

    <!-- Controls -->
    <button
        class="absolute top-1/2 left-4 transform -translate-y-1/2 bg-white/30 hover:bg-white/50 text-white p-2 rounded-full backdrop-blur-sm transition-all opacity-0 group-hover:opacity-100"
        id="prev-slide"
    >
        <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            class="w-6 h-6"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M15.75 19.5L8.25 12l7.5-7.5"></path>
        </svg>
    </button>

    <button
        class="absolute top-1/2 right-4 transform -translate-y-1/2 bg-white/30 hover:bg-white/50 text-white p-2 rounded-full backdrop-blur-sm transition-all opacity-0 group-hover:opacity-100"
        id="next-slide"
    >
        <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            class="w-6 h-6"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
        </svg>
    </button>
</div>

<script>
    const slides = document.querySelectorAll(".slide");
    const indicators = document.querySelectorAll(".indicator");
    const prevBtn = document.getElementById("prev-slide");
    const nextBtn = document.getElementById("next-slide");
    let currentIndex = 0;
    const totalSlides = slides.length;
    let intervalId;

    function showSlide(index) {
        slides.forEach((slide, i) => {
            slide.classList.toggle("opacity-100", i === index);
            slide.classList.toggle("opacity-0", i !== index);
        });

        indicators.forEach((indicator, i) => {
            const isActive = i === index;
            indicator.classList.toggle("bg-white", isActive);
            indicator.classList.toggle("bg-white/50", !isActive);
        });

        currentIndex = index;
    }

    function nextSlide() {
        showSlide((currentIndex + 1) % totalSlides);
    }

    function prevSlide() {
        showSlide((currentIndex - 1 + totalSlides) % totalSlides);
    }

    function startAutoPlay() {
        intervalId = setInterval(nextSlide, 5000);
    }

    function stopAutoPlay() {
        clearInterval(intervalId);
    }

    nextBtn?.addEventListener("click", () => {
        stopAutoPlay();
        nextSlide();
        startAutoPlay();
    });

    prevBtn?.addEventListener("click", () => {
        stopAutoPlay();
        prevSlide();
        startAutoPlay();
    });

    indicators.forEach((indicator, index) => {
        indicator.addEventListener("click", () => {
            stopAutoPlay();
            showSlide(index);
            startAutoPlay();
        });
    });

    startAutoPlay();
</script>
